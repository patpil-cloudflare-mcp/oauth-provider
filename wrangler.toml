name = "oauth-provider"
main = "src/index.ts"
compatibility_date = "2024-11-20"
compatibility_flags = ["nodejs_compat"]

# Static Assets Configuration
[assets]
directory = "./public"
binding = "ASSETS"

# Custom Domains - Modern approach (replaces manual AAAA 100:: DNS records)
# Cloudflare automatically creates and manages DNS records and certificates

# OAuth 2.1 Configuration
[vars]
OAUTH_BASE_URL = "https://panel.wtyczki.ai"

# Custom Domains (automatic DNS + certificate management)
[[routes]]
pattern = "api.wtyczki.ai"
custom_domain = true

[[routes]]
pattern = "panel.wtyczki.ai"
custom_domain = true

[[d1_databases]]
binding = "DB"
database_name = "mcp-oauth"
database_id = "eac93639-d58e-4777-82e9-f1e28113d5b2"

[[kv_namespaces]]
binding = "OAUTH_STORE"
id = "ed207a9e99b2420cb3c65622c1b4d6f9"
preview_id = "903645263ef443b79edf68b46061bb5d"

[[kv_namespaces]]
binding = "USER_SESSIONS"
id = "e5ad189139cd44f38ba0224c3d596c73"
preview_id = "49c43fb4d6e242db87fd885ba46b5a1d"

# NOTE: Durable Objects deferred to production version
# Prototype uses simple REST endpoints for faster validation
